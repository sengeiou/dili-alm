<style>
	#phaseForm .textbox-label{width: 90px}
</style>
<form id="phaseForm" action="${contextPath!}/project/phase/insert" class="easyui-form" method="post" fit="true">
	<input name="id" id="id" type="hidden" value="${model.id!}">
	<input type="hidden" name="projectId" value="${model.project1.id!}">
	<table width="100%">
		<tr>
			<td colspan="2" style="padding: 5px;">
				<span class="require">*</span>
				<input class="easyui-textbox" style="width: calc(100% - 62px);" value="${model.project1.name!}" panelWidth="auto" panelHeight="auto" label="项目名称:" readonly="readonly" />
			</td>
		</tr>
		<tr>
			<td style="width: 50%;padding: 5px;">
				<span class="require">*</span>
				<select editable="false" panelWidth="auto" panelHeight="auto" label="阶段名称:" class="easyui-combobox"
						name="name" id="name" style="width: calc(50% - 50px);"> <%for(item in model.phaseNames){%>
					<option value="${item.value!}"<%if(has(model) && model.name == item.value){%>selected="selected"<%}%>>${item.code!}</option> <%}%>
				</select>
			</td>
			<td style="width: 50%;padding: 5px;">
				<span class="require">*</span>
				<select editable="false" panelWidth="auto" panelHeight="auto" label="版本名称:" class="easyui-combobox"
						name="versionId" id="versionId" style="width: calc(50% - 50px);"> <%for(item in model.allVersions){%>
					<option value="${item.id!}"<%if(has(model) && model.versionId == item.id){%>selected="selected"<%}%>>${item.version!}</option> <%}%>
				</select>
			</td>
		</tr>
		<tr>
			<td style="padding: 5px;">
				<span class="require">*</span>
				<input class="easyui-datebox" style="width: calc(50% - 57px);" name="plannedStartDate" id="plannedStartDate" value="${model.plannedStartDate!,dateFormat='yyyy-MM-dd HH:mm:ss'}" style="width: 100%" data-options="label:'计划开始日期:',editable:false" required="true" />
			</td>
			<td style="padding: 5px;">
				<span class="require">*</span>
				<input class="easyui-datebox" style="width: calc(50% - 57px);" name="plannedEndDate" id="plannedEndDate" value="${model.plannedEndDate!,dateFormat='yyyy-MM-dd HH:mm:ss'}" style="width: 100%" data-options="label:'计划结束日期:',editable:false" required="true" />
			</td>
		</tr>
		<tr>
			<td colspan="2" style="padding: 5px;">
				<label style="float:left;margin-left: 11px;">文档：</label>
				<div id="fileuploader" style="margin-left: 106px;padding: 5px"></div>
				<table class="easyui-datagrid" title="阶段文档列表" id="phaseFileGrid" style="width: 100%"
					   fitColumns="true" pagination="false" remoteSort="false" loadMsg="数据加载中..." singleSelect="true" method="post" multiSort="false" align="center" fit="false" striped="true" idField="id" data-options="<%if(model.id != null){%>url:'${contextPath!}/files/list?phaseId=${model.id!}'<%}%>">
					<thead>
					<tr>
						<th data-options="field:'name', width:'20%', align:'center', resizable:'true', fixed:'false'">文件名</th>
						<th data-options="field:'length', width:'20%', align:'center', resizable:'true', fixed:'false'">大小</th>
						<th data-options="field:'created', width:'50%',  _provider:'datetimeProvider', align:'center', resizable:'true', fixed:'false'">上传日期</th>
						<th data-options="field:'opt', width:'10%', align:'center', resizable:'true', fixed:'false',formatter:phaseFileOptFormatter">操作</th>
					</tr>
					</thead>
				</table>
			</td>
		</tr>
	</table>
</form>
<script type="text/javascript">
	<#project_phaseFormJs />
</script>